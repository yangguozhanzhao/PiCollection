## 需求理解


预测参数
1. 第二天天气情况 （例如多云，晴朗）
2. 日照时间长短(可以用测量出来之前一天的值)。
3.之前几天的太阳辐射值  
4.海拔高度和纬度(这个我会告诉你我的值，是一个定值，也可以不考虑)
P
所以问题可以分解为：
- 问题1:需要使用树莓派+光照传感器来测量当地的光照强度，用来作为训练数据和验证数据
- 问题2:需要将数据从采集端（树莓派+光照传感器）传输给分析端进行数据的分析，以便预测。
- 问题3:使用线性回归预测第二天分时段的光照强度，其中天气，气温，空气质量数据来自天气预报


## 问题1:树莓派测光照强度
#### 硬件
- 树莓派3B
- 光照模块BH1750FVI
- 接线：VCC——1，GND——9，SDA——3，SCL—— 5，ADDR——不接

#### 软件
- 树莓派设置中开启I2C
- 模块计算原理：光照强度=读取值x分辨率/（1.2x灵敏度），如果想特别准确，需要照度计来标定和校准
- 代码见`illuminance.py`



## 问题2:E32无线串口模块传输数据
#### 硬件
- E32无线串口模块

#### 软件
- USB串口驱动（SiLabsUSBDriverDisk）, 串口助手（CoolTermMac）
- 注意：安装好串口驱动（在设置网络界面能显示串口名，安装才成功）； 串口助手里面点设置，要设置好波特率（Baudrate），数据位(Data Bits), 停止位（Stop Bits）等基本属性。
- 代码见`SerialHelp.py`


## 问题3:预测光照强度
#### 问题分析 
预测当地一天分时段光照强度的影响因素
- 海波和经纬度，同一时间，不同海拔高度和不同经纬度的需要考虑因素照度确实不同，但是本项目研究的是同一地区不同时间的照度，所以此处不考虑
- 前一天的光照强度的数据24个，由树莓派+关照模块BH1750FVI测试所得，具体方法见问题1分析
- 时间，晚上一般是0，中午最高
- 天气（晴朗，多云，下雨下雪）依次将天气值设置为1-3，晴朗=1，多云=2，下雨下雪=3
- 空气质量，空气质量指数作为参考，或者PM2.5的值，取当天平均值（如果有分时段的数据更好）
- 气温，单位摄氏度，当天白天平均值（如果有分时段数据更好）

#### 数据
`数据.csv`文件是根据模型收集的数据，其中20180207的光照强度数据是实际测试所得（其他日期光照强度数据是伪造的），天气，气温和空气质量数据是网络查询的数据（武汉地区），所以只能更具此数据演绎线性回归模型的训练预测过程，实际预测结果准确性不能保证

#### 模型
采用机器学习线性回归模型，即  
y = wX+b
- 其中变量X为：前一天分时段光照强度24个数据（测试获得）+需要预测的时间段（自己选定1-24）+预测当天天气（1-3，天气预报获取）+预测当天空气质量指数（预报获取）+预测当天白天气温（预报获取），共计28个数据
- y为需要预测的当天某个时段的光照强度
- w和b是需要训练阶段确定的参数
线性模型测试后，预测值和真实值差别较大，应该是线性回归模型选用不太合适，时间和光照强度的非线性关系较明显，后续尝试一些非线性模型

